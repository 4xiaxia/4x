<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIClient-2-API - API æ–‡æ¡£</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 20px;
            text-align: center;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 250px;
            height: 100%;
            background: white;
            padding: 20px;
            box-shadow: 2px 0 5px rgba(0,0,0,0.05);
            overflow-y: auto;
            z-index: 1000;
        }

        .sidebar h3 {
            font-size: 0.9em;
            color: #667eea;
            text-transform: uppercase;
            margin-bottom: 10px;
            margin-top: 20px;
            padding-bottom: 5px;
            border-bottom: 2px solid #667eea;
        }

        .sidebar h3:first-child {
            margin-top: 0;
        }

        .sidebar ul {
            list-style: none;
            margin-bottom: 20px;
        }

        .sidebar li {
            margin-bottom: 5px;
        }

        .sidebar a {
            color: #555;
            text-decoration: none;
            display: block;
            padding: 8px 12px;
            border-radius: 5px;
            transition: all 0.3s;
            font-size: 0.9em;
        }

        .sidebar a:hover {
            background: #667eea;
            color: white;
            transform: translateX(5px);
        }

        .sidebar a.active {
            background: #667eea;
            color: white;
        }

        .main-content {
            margin-left: 280px;
            padding: 20px;
        }

        .section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .section h2 {
            color: #667eea;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .section h3 {
            color: #764ba2;
            margin: 25px 0 15px 0;
        }

        .section h4 {
            color: #555;
            margin: 20px 0 10px 0;
        }

        .endpoint {
            background: #f9f9f9;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .method {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            margin-right: 10px;
            font-size: 0.9em;
        }

        .method.get { background: #61affe; }
        .method.post { background: #49cc90; }
        .method.put { background: #fca130; }
        .method.delete { background: #f93e3e; }

        .url {
            font-family: 'Courier New', monospace;
            color: #333;
            font-size: 1.1em;
        }

        .description {
            margin: 15px 0;
            color: #666;
        }

        .parameters {
            margin: 20px 0;
        }

        .parameter {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border: 1px solid #e0e0e0;
        }

        .parameter-name {
            font-weight: bold;
            color: #667eea;
        }

        .parameter-type {
            color: #764ba2;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .parameter-required {
            color: #f93e3e;
            font-size: 0.85em;
            margin-left: 10px;
        }

        .response {
            margin: 20px 0;
        }

        .response-code {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 5px;
            background: #49cc90;
            color: white;
            font-weight: bold;
            margin-right: 10px;
        }

        .response-code.error {
            background: #f93e3e;
        }

        .response-code.warning {
            background: #fca130;
        }

        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .code-block pre {
            margin: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .auth-method {
            background: #e8f5e9;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            border-left: 4px solid #4caf50;
        }

        .auth-method h4 {
            color: #2e7d32;
            margin-bottom: 10px;
        }

        .auth-method ul {
            list-style: none;
            padding-left: 0;
        }

        .auth-method li {
            margin-bottom: 5px;
            padding-left: 20px;
            position: relative;
        }

        .auth-method li:before {
            content: "âœ“";
            position: absolute;
            left: 0;
            color: #4caf50;
            font-weight: bold;
        }

        .tag {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            margin-right: 5px;
            margin-bottom: 5px;
        }

        .tag.auth { background: #e3f2fd; color: #1976d2; }
        .tag.config { background: #f3e5f5; color: #7b1fa2; }
        .tag.system { background: #e8f5e9; color: #388e3c; }
        .tag.provider { background: #fff3e0; color: #f57c00; }
        .tag.oauth { background: #fce4ec; color: #c2185b; }
        .tag.usage { background: #e0f2f1; color: #009688; }
        .tag.update { background: #f3e5f5; color: #6a1b9a; }
        .tag.plugin { background: #e1bee7; color: #7b1fa2; }
        .tag.openapi { background: #e3f2fd; color: #1565c0; }
        .tag.gemini { background: #fff8e1; color: #f9a825; }
        .tag.claude { background: #fce4ec; color: #ad1457; }
        .tag.ollama { background: #e0f2f1; color: #00695c; }

        @media (max-width: 768px) {
            .sidebar {
                display: none;
            }
            .main-content {
                margin-left: 0;
            }
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <h3>å¿«é€Ÿå¼€å§‹</h3>
        <ul>
            <li><a href="#introduction">ç®€ä»‹</a></li>
            <li><a href="#authentication">è®¤è¯æ–¹å¼</a></li>
            <li><a href="#quick-start">å¿«é€Ÿå¼€å§‹</a></li>
        </ul>

        <h3>ç®¡ç†åå° API</h3>
        <ul>
            <li><a href="#api-auth">è®¤è¯æ¥å£</a></li>
            <li><a href="#api-config">é…ç½®ç®¡ç†</a></li>
            <li><a href="#api-system">ç³»ç»Ÿç®¡ç†</a></li>
            <li><a href="#api-providers">æä¾›å•†ç®¡ç†</a></li>
            <li><a href="#api-oauth">OAuth ç®¡ç†</a></li>
            <li><a href="#api-config-files">é…ç½®æ–‡ä»¶</a></li>
            <li><a href="#api-usage">ä½¿ç”¨é‡æŸ¥è¯¢</a></li>
            <li><a href="#api-update">æ›´æ–°ç®¡ç†</a></li>
            <li><a href="#api-plugins">æ’ä»¶ç®¡ç†</a></li>
        </ul>

        <h3>æ ¸å¿ƒ AI API</h3>
        <ul>
            <li><a href="#api-openai">OpenAI å…¼å®¹</a></li>
            <li><a href="#api-gemini">Gemini å…¼å®¹</a></li>
            <li><a href="#api-claude">Claude å…¼å®¹</a></li>
            <li><a href="#api-ollama">Ollama å…¼å®¹</a></li>
        </ul>

        <h3>ä¸»è¿›ç¨‹ API</h3>
        <ul>
            <li><a href="#api-master">ä¸»è¿›ç¨‹ç®¡ç†</a></li>
        </ul>
    </div>

    <div class="main-content">
        <div class="container">
            <div class="header">
                <h1>AIClient-2-API</h1>
                <p>å¤§æ¨¡å‹ API ç»Ÿä¸€ä»£ç†æœåŠ¡ - å®Œæ•´ API æ–‡æ¡£</p>
            </div>

            <div class="section" id="introduction">
                <h2>ğŸ“– ç®€ä»‹</h2>
                <p>AIClient-2-API æ˜¯ä¸€ä¸ªå°†å¤šç§å¤§æ¨¡å‹ APIï¼ˆGemini, Claude, OpenAI ç­‰ï¼‰ç»Ÿä¸€å°è£…ä¸º OpenAI å…¼å®¹æ¥å£çš„ä»£ç†æœåŠ¡ã€‚</p>
                
                <h3>åŠŸèƒ½ç‰¹æ€§</h3>
                <ul>
                    <li>æ”¯æŒå¤šç§å¤§æ¨¡å‹æä¾›å•†ï¼ˆGemini, Claude, OpenAI, Qwen, iFlow, Zhipu ç­‰ï¼‰</li>
                    <li>OpenAI å…¼å®¹æ¥å£</li>
                    <li>å¤šè´¦å·è½®è¯¢å’Œæ™ºèƒ½æ•…éšœè½¬ç§»</li>
                    <li>å®æ—¶æ—¥å¿—æ¨é€ï¼ˆServer-Sent Eventsï¼‰</li>
                    <li>Web UI ç®¡ç†ç•Œé¢</li>
                    <li>OAuth æˆæƒæœºåˆ¶</li>
                </ul>
            </div>

            <div class="section" id="authentication">
                <h2>ğŸ” è®¤è¯æ–¹å¼</h2>
                
                <div class="auth-method">
                    <h4>ç®¡ç†åå° API è®¤è¯</h4>
                    <ul>
                        <li><strong>æ–¹å¼ï¼š</strong>Bearer Tokenï¼ˆJWTï¼‰</li>
                        <li><strong>è·å–æ–¹å¼ï¼š</strong>POST /api/login</li>
                        <li><strong>æœ‰æ•ˆæœŸï¼š</strong>7 å¤©ï¼ˆ604800 ç§’ï¼‰</li>
                        <li><strong>è¯·æ±‚å¤´ï¼š</strong>Authorization: Bearer {token}</li>
                    </ul>
                </div>

                <div class="auth-method">
                    <h4>æ ¸å¿ƒ AI API è®¤è¯</h4>
                    <p>æ”¯æŒå¤šç§ API Key æ ¼å¼ï¼š</p>
                    <ul>
                        <li><strong>OpenAI é£æ ¼ï¼š</strong>Authorization: Bearer {key}</li>
                        <li><strong>Claude é£æ ¼ï¼š</strong>x-api-key: {key}</li>
                        <li><strong>Gemini é£æ ¼ï¼š</strong>x-goog-api-key: {key}</li>
                        <li><strong>URL å‚æ•°ï¼š</strong>?key={key}</li>
                    </ul>
                </div>
            </div>

            <div class="section" id="quick-start">
                <h2>ğŸš€ å¿«é€Ÿå¼€å§‹</h2>
                
                <h3>1. å®‰è£…ä¾èµ–</h3>
                <div class="code-block"><pre>npm install</pre></div>

                <h3>2. é…ç½®æœåŠ¡</h3>
                <p>å¤åˆ¶é…ç½®æ¨¡æ¿å¹¶ä¿®æ”¹ï¼š</p>
                <div class="code-block"><pre>cp configs/config.json.example configs/config.json
vi configs/config.json</pre></div>

                <h3>3. å¯åŠ¨æœåŠ¡</h3>
                <div class="code-block"><pre>npm start</pre></div>

                <h3>4. è®¿é—®ç•Œé¢</h3>
                <p>æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š<a href="http://localhost:3000" target="_blank">http://localhost:3000</a></p>
            </div>

            <div class="section" id="api-auth">
                <h2>ğŸ”‘ è®¤è¯æ¥å£</h2>

                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="url">/api/login</span>
                    <p class="description">ç®¡ç†å‘˜ç™»å½•</p>
                    
                    <div class="parameters">
                        <h4>è¯·æ±‚ä½“</h4>
                        <div class="code-block"><pre>{
  "password": "admin123"
}</pre></div>
                    </div>

                    <div class="response">
                        <span class="response-code">200</span>
                        <p>ç™»å½•æˆåŠŸ</p>
                        <div class="code-block"><pre>{
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "expiresIn": 604800
}</pre></div>

                        <span class="response-code error">401</span>
                        <p>å¯†ç é”™è¯¯</p>
                        <div class="code-block"><pre>{
  "error": {
    "message": "Invalid password"
  }
}</pre></div>
                    </div>
                </div>

                <div class="endpoint">
                    <span class="method get">GET</span>
                    <span class="url">/api/health</span>
                    <p class="description">å¥åº·æ£€æŸ¥ï¼ˆå…è®¤è¯ï¼‰</p>
                    
                    <div class="response">
                        <span class="response-code">200</span>
                        <p>æœåŠ¡æ­£å¸¸</p>
                        <div class="code-block"><pre>{
  "status": "healthy",
  "timestamp": "2026-02-15T12:00:00.000Z",
  "provider": "gemini-cli-oauth"
}</pre></div>
                    </div>
                </div>
            </div>

            <div class="section" id="api-config">
                <h2>âš™ï¸ é…ç½®ç®¡ç†</h2>

                <div class="endpoint">
                    <span class="method get">GET</span>
                    <span class="url">/api/config</span>
                    <p class="description">è·å–å½“å‰ç³»ç»Ÿé…ç½®</p>
                    <p class="description"><strong>éœ€è¦è®¤è¯ï¼š</strong>Bearer Token</p>
                </div>

                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="url">/api/config</span>
                    <p class="description">æ›´æ–°ç³»ç»Ÿé…ç½®</p>
                    <p class="description"><strong>éœ€è¦è®¤è¯ï¼š</strong>Bearer Token</p>
                </div>

                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="url">/api/reload-config</span>
                    <p class="description">é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶</p>
                    <p class="description"><strong>éœ€è¦è®¤è¯ï¼š</strong>Bearer Token</p>
                </div>
            </div>

            <div class="section" id="api-providers">
                <h2>ğŸ¢ æä¾›å•†ç®¡ç†</h2>

                <div class="endpoint">
                    <span class="method get">GET</span>
                    <span class="url">/api/providers</span>
                    <p class="description">è·å–æ‰€æœ‰æä¾›å•†çš„è´¦å·æ± ä¿¡æ¯</p>
                    <p class="description"><strong>éœ€è¦è®¤è¯ï¼š</strong>Bearer Token</p>
                </div>

                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="url">/api/providers</span>
                    <p class="description">æ·»åŠ æ–°çš„æä¾›å•†è´¦å·</p>
                    <p class="description"><strong>éœ€è¦è®¤è¯ï¼š</strong>Bearer Token</p>
                </div>

                <div class="endpoint">
                    <span class="method put">PUT</span>
                    <span class="url">/api/providers/{type}/{uuid}</span>
                    <p class="description">æ›´æ–°æŒ‡å®šæä¾›å•†çš„é…ç½®</p>
                    <p class="description"><strong>éœ€è¦è®¤è¯ï¼š</strong>Bearer Token</p>
                </div>

                <div class="endpoint">
                    <span class="method delete">DELETE</span>
                    <span class="url">/api/providers/{type}/{uuid}</span>
                    <p class="description">åˆ é™¤æŒ‡å®šçš„æä¾›å•†è´¦å·</p>
                    <p class="description"><strong>éœ€è¦è®¤è¯ï¼š</strong>Bearer Token</p>
                </div>
            </div>

            <div class="section" id="api-openai">
                <h2>ğŸ¤– OpenAI å…¼å®¹æ¥å£</h2>

                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="url">/v1/chat/completions</span>
                    <p class="description">OpenAI å…¼å®¹çš„èŠå¤©å®Œæˆæ¥å£</p>
                    <p class="description"><strong>éœ€è¦è®¤è¯ï¼š</strong>API Key</p>

                    <div class="parameters">
                        <h4>è¯·æ±‚ä½“ç¤ºä¾‹</h4>
                        <div class="code-block"><pre>{
  "model": "gemini-2.0-flash-exp",
  "messages": [
    {
      "role": "system",
      "content": "ä½ æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„åŠ©æ‰‹ã€‚"
    },
    {
      "role": "user",
      "content": "ä½ å¥½ï¼"
    }
  ],
  "stream": false,
  "temperature": 0.7,
  "max_tokens": 1000
}</pre></div>
                    </div>
                </div>

                <div class="endpoint">
                    <span class="method get">GET</span>
                    <span class="url">/v1/models</span>
                    <p class="description">è·å–å¯ç”¨çš„æ¨¡å‹åˆ—è¡¨</p>
                    <p class="description"><strong>éœ€è¦è®¤è¯ï¼š</strong>API Key</p>
                </div>
            </div>

            <div class="section" id="api-master">
                <h2>ğŸ›ï¸ ä¸»è¿›ç¨‹ç®¡ç†</h2>

                <div class="endpoint">
                    <span class="method get">GET</span>
                    <span class="url">/master/status</span>
                    <p class="description">è·å–ä¸»è¿›ç¨‹å’Œå­è¿›ç¨‹çš„çŠ¶æ€ä¿¡æ¯</p>
                </div>

                <div class="endpoint">
                    <span class="method post">POST</span>
                    <span class="url">/master/restart</span>
                    <p class="description">é‡å¯å­è¿›ç¨‹æœåŠ¡</p>
                </div>

                <div class="endpoint">
                    <span class="method get">GET</span>
                    <span class="url">/master/health</span>
                    <p class="description">æ£€æŸ¥ä¸»è¿›ç¨‹å’Œå­è¿›ç¨‹çš„å¥åº·çŠ¶æ€</p>
                </div>
            </div>

            <div class="section">
                <h2>ğŸ“š æ›´å¤šä¿¡æ¯</h2>
                <p>å®Œæ•´çš„ OpenAPI 3.0 è§„èŒƒæ–‡ä»¶è¯·æŸ¥çœ‹ï¼š</p>
                <p><a href="/docs/openapi.yaml" target="_blank">docs/openapi.yaml</a></p>
                <p>å¯ä»¥ä½¿ç”¨ Swagger UI æˆ– ReDoc ç­‰å·¥å…·å¯è§†åŒ–æŸ¥çœ‹ï¼š</p>
                <ul>
                    <li><a href="https://editor.swagger.io/" target="_blank">Swagger Editor</a></li>
                    <li><a href="https://redocly.github.io/redoc/" target="_blank">ReDoc</a></li>
                </ul>
            </div>
        </div>
    </div>
</body>
</html>
