# AIClient-2-API 使用指南

> 💡 **无需 Docker** - 本项目支持两种部署方式，本地直接运行无需 Docker，适合所有环境！

## 🔍 环境检测

首先运行环境检测脚本，自动判断最佳部署方案：

```bash
cd /workspace/AIClient-2-API
bash check-environment.sh
```

脚本会自动检测：
- Node.js 和 npm 是否安装
- Docker 是否可用（可选）
- 端口状态
- 项目文件完整性

## 🚀 部署方式选择

| 方案 | 需要 Docker | 难度 | 推荐场景 |
|------|------------|------|---------|
| **本地直接运行** | ❌ 不需要 | ⭐ 简单 | CloudStudio、本地开发、所有环境 |
| **Docker 容器** | ✅ 需要 | ⭐⭐ 中等 | 生产环境、需要隔离（可选） |

### 1️⃣ 一键部署（本地直接运行，推荐）

```bash
cd /workspace/AIClient-2-API
bash 一键部署.sh
```

**适合场景**: 首次部署或快速重启
**优势**: 无需 Docker，启动快，适合所有环境

---

### 2️⃣ 完整部署（推荐）

```bash
cd /workspace/AIClient-2-API
bash deploy.sh
```

**适合场景**: 需要详细日志和环境检查
**优势**: 无需 Docker，完整检查，适合首次部署

**功能特点**:
- ✅ 完整的环境检查（Node.js、npm）
- ✅ 详细的步骤说明
- ✅ 自动创建所有配置文件
- ✅ 服务健康检查
- ✅ 错误提示和解决建议

---

### 3️⃣ 快速启动

```bash
cd /workspace/AIClient-2-API
bash quick-start.sh
```

**适合场景**: 依赖已安装，只需重启服务
**优势**: 无需 Docker，秒级启动

---

### 4️⃣ Docker 部署（可选）

如果环境支持 Docker，可以使用 Docker 容器部署：

```bash
cd /workspace/AIClient-2-API/docker
docker compose up -d
```

**适合场景**: 生产环境、需要隔离
**前提**: 需要安装 Docker

---

## 📋 健康检查

```bash
cd /workspace/AIClient-2-API
bash health-check.sh
```

---

## 🔧 常用命令

| 操作 | 命令 |
|------|------|
| 查看日志 | `tail -f /tmp/aiclient.log` |
| 停止服务 | `lsof -ti:3000 \| xargs kill -9` |
| 重启服务 | `bash 一键部署.sh` |
| 检查状态 | `bash health-check.sh` |
| 完整重装 | `rm -rf node_modules && bash deploy.sh` |

---

## 🎯 部署后访问

- **Web UI**: http://localhost:3000
- **默认密码**: admin123

---

## 💡 部署说明

### 无 Docker 环境也能部署

本项目**不依赖 Docker**，主要使用本地直接运行方式：

- ✅ 只需要 Node.js 和 npm
- ✅ 适合所有环境（CloudStudio、本地、服务器）
- ✅ 启动速度快（~10秒）
- ✅ 调试方便
- ✅ 资源占用少

### Docker 是可选的

如果你的环境支持 Docker，也可以选择 Docker 部署：

- 更好的环境隔离
- 适合生产环境
- 便于迁移和管理

但**不是必需的**，完全不影响项目的使用！

---

## 📊 改进说明

### ✨ 自动化改进

| 问题 | 解决方案 |
|------|---------|
| 配置文件缺失 | 自动创建 config.json 和 provider_pools.json |
| 依赖安装失败 | 智能检测 node_modules，避免重复安装 |
| 端口占用 | 自动检测并停止旧服务 |
| 服务启动失败 | 增加重试机制和详细日志 |
| 状态不明确 | 提供健康检查脚本 |

### 📝 新增脚本

1. **一键部署.sh** - 最简化的部署脚本
2. **deploy.sh** - 完整的自动化部署脚本
3. **quick-start.sh** - 快速启动脚本
4. **health-check.sh** - 健康检查脚本
5. **DEPLOYMENT.md** - 详细的部署文档

---

## ⚡ 快速开始（推荐本地直接运行）

```bash
# 1. 进入项目目录
cd /workspace/AIClient-2-API

# 2. 运行环境检测（可选）
bash check-environment.sh

# 3. 一键部署
bash 一键部署.sh

# 4. 访问服务
# 浏览器打开: http://localhost:3000
# 密码: admin123
```

---

## 🐳 Docker 部署（可选）

如果你的环境支持 Docker：

```bash
# 1. 进入 docker 目录
cd /workspace/AIClient-2-API/docker

# 2. 启动服务
docker compose up -d

# 3. 查看日志
docker compose logs -f

# 4. 停止服务
docker compose down
```

---

## 💡 提示

```bash
# 1. 进入项目目录
cd /workspace/AIClient-2-API

# 2. 一键部署
bash 一键部署.sh

# 3. 访问服务
# 浏览器打开: http://localhost:3000
# 密码: admin123
```

---

## 💡 提示

- 所有脚本都有执行权限，可以直接运行
- 部署失败时查看 `/tmp/aiclient.log` 日志
- 重复部署是安全的，脚本会自动处理
- 配置文件已自动创建，无需手动配置
- **不需要 Docker 也能使用！**

---

## 🔑 Docker 不是必需的

**重要说明**: 本项目**不依赖 Docker**，可以在任何支持 Node.js 的环境中运行！

- ✅ CloudStudio: 直接运行（推荐）
- ✅ 本地开发: 直接运行（推荐）
- ✅ 生产服务器: 可以选择本地运行或 Docker
- ❌ 无 Docker 环境: 使用本地直接运行方式即可

如果你不确定是否支持 Docker，运行 `bash check-environment.sh` 自动检测！

---

## 🆘 遇到问题？

1. **查看日志**: `tail -f /tmp/aiclient.log`
2. **检查状态**: `bash health-check.sh`
3. **完整重装**: `rm -rf node_modules && bash deploy.sh`
4. **查看文档**: `cat DEPLOYMENT.md`
