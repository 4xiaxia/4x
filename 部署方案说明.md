# AIClient-2-API éƒ¨ç½²æ–¹æ¡ˆè¯´æ˜

## ğŸ¯ æ”¯æŒç¯å¢ƒæ£€æµ‹

### å½“å‰ç¯å¢ƒæ£€æµ‹
- âœ… Node.js: å·²å®‰è£…
- âœ… npm: å·²å®‰è£…
- âœ… Docker: å·²å®‰è£… (v27.5.1)
- âœ… Linux ç¯å¢ƒ: æ”¯æŒ

---

## ğŸ“¦ éƒ¨ç½²æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | æ˜¯å¦éœ€è¦ Docker | éš¾åº¦ | æ¨èåœºæ™¯ |
|------|----------------|------|---------|
| **æœ¬åœ°ç›´æ¥è¿è¡Œ** | âŒ ä¸éœ€è¦ | â­ ç®€å• | CloudStudioã€æœ¬åœ°å¼€å‘ã€æ‰€æœ‰ç¯å¢ƒ |
| **Docker å®¹å™¨** | âœ… éœ€è¦ | â­â­ ä¸­ç­‰ | ç”Ÿäº§ç¯å¢ƒã€éœ€è¦éš”ç¦»ã€æ‰¹é‡éƒ¨ç½² |
| **Docker Compose** | âœ… éœ€è¦ | â­â­ ä¸­ç­‰ | å¤šå®¹å™¨éƒ¨ç½²ã€å¼€å‘ç¯å¢ƒ |

---

## ğŸš€ æ–¹æ¡ˆ 1: æœ¬åœ°ç›´æ¥è¿è¡Œï¼ˆæ¨èï¼Œæ— éœ€ Dockerï¼‰

### ä¼˜åŠ¿
- âœ… æ— éœ€ Docker æ”¯æŒ
- âœ… å¯åŠ¨é€Ÿåº¦å¿«
- âœ… è°ƒè¯•æ–¹ä¾¿
- âœ… èµ„æºå ç”¨å°‘
- âœ… é€‚åˆæ‰€æœ‰ç¯å¢ƒ

### éƒ¨ç½²æ­¥éª¤

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /workspace/AIClient-2-API

# 2. ä¸€é”®éƒ¨ç½²ï¼ˆæ¨èï¼‰
bash ä¸€é”®éƒ¨ç½².sh

# æˆ–ä½¿ç”¨å®Œæ•´éƒ¨ç½²
bash deploy.sh
```

### éªŒè¯éƒ¨ç½²

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
bash health-check.sh

# è®¿é—®æœåŠ¡
# æµè§ˆå™¨æ‰“å¼€: http://localhost:3000
# å¯†ç : admin123
```

### ç®¡ç†å‘½ä»¤

```bash
# æŸ¥çœ‹æ—¥å¿—
tail -f /tmp/aiclient.log

# åœæ­¢æœåŠ¡
lsof -ti:3000 | xargs kill -9

# é‡å¯æœåŠ¡
bash ä¸€é”®éƒ¨ç½².sh

# å®Œæ•´é‡è£…
rm -rf node_modules && bash deploy.sh
```

---

## ğŸ³ æ–¹æ¡ˆ 2: Docker å®¹å™¨éƒ¨ç½²ï¼ˆå¯é€‰ï¼‰

### ä¼˜åŠ¿
- âœ… ç¯å¢ƒéš”ç¦»
- âœ… æ˜“äºè¿ç§»
- âœ… ç‰ˆæœ¬ç®¡ç†
- âœ… é€‚åˆç”Ÿäº§ç¯å¢ƒ

### å‰ç½®æ¡ä»¶
- éœ€è¦å®‰è£… Docker
- éœ€è¦æœ‰ Docker è¿è¡Œæƒé™

### éƒ¨ç½²æ­¥éª¤

#### æ–¹æ³• 1: ä½¿ç”¨é¢„æ„å»ºé•œåƒ

```bash
# 1. åˆ›å»ºé…ç½®ç›®å½•
mkdir -p ~/aiclient-configs

# 2. è¿è¡Œå®¹å™¨
docker run -d \
  -p 3000:3000 \
  -p 8085-8087:8085-8087 \
  -p 1455:1455 \
  -p 19876-19880:19876-19880 \
  --restart=always \
  -v ~/aiclient-configs:/app/configs \
  --name aiclient2api \
  justlikemaki/aiclient-2-api
```

#### æ–¹æ³• 2: ä½¿ç”¨ Docker Compose

```bash
# 1. è¿›å…¥ docker ç›®å½•
cd /workspace/AIClient-2-API/docker

# 2. åˆ›å»ºé…ç½®ç›®å½•
mkdir -p configs

# 3. å¯åŠ¨æœåŠ¡
docker compose up -d
```

#### æ–¹æ³• 3: ä»æºä»£ç æ„å»º

```bash
# 1. åœ¨é¡¹ç›®æ ¹ç›®å½•æ„å»ºé•œåƒ
docker build -t aiclient2api:local .

# 2. è¿è¡Œå®¹å™¨
docker run -d \
  -p 3000:3000 \
  -v ~/aiclient-configs:/app/configs \
  --name aiclient2api \
  aiclient2api:local
```

### Docker ç®¡ç†å‘½ä»¤

```bash
# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs -f aiclient2api

# åœæ­¢å®¹å™¨
docker stop aiclient2api

# å¯åŠ¨å®¹å™¨
docker start aiclient2api

# é‡å¯å®¹å™¨
docker restart aiclient2api

# åˆ é™¤å®¹å™¨
docker rm -f aiclient2api

# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker ps | grep aiclient2api
```

---

## ğŸ” ç¯å¢ƒæ£€æµ‹è„šæœ¬

æˆ‘åˆ›å»ºäº†ä¸€ä¸ªç¯å¢ƒæ£€æµ‹è„šæœ¬ï¼Œå¯ä»¥è‡ªåŠ¨æ£€æµ‹å½“å‰ç¯å¢ƒæ”¯æŒçš„éƒ¨ç½²æ–¹å¼ï¼š

```bash
# è¿è¡Œç¯å¢ƒæ£€æµ‹
bash check-environment.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹ï¼š
- âœ… Node.js æ˜¯å¦å®‰è£…åŠç‰ˆæœ¬
- âœ… npm æ˜¯å¦å¯ç”¨
- âœ… Docker æ˜¯å¦å®‰è£…
- âœ… Docker æ˜¯å¦æœ‰è¿è¡Œæƒé™
- âœ… æ¨èæœ€é€‚åˆçš„éƒ¨ç½²æ–¹æ¡ˆ

---

## ğŸ’¡ é€‰æ‹©å»ºè®®

### é€‰æ‹©æœ¬åœ°ç›´æ¥è¿è¡Œï¼ˆæ–¹æ¡ˆ 1ï¼‰çš„æƒ…å†µ

- âœ… CloudStudio ç¯å¢ƒï¼ˆå½“å‰ï¼‰
- âœ… æœ¬åœ°å¼€å‘æµ‹è¯•
- âœ… ä¸ç¡®å®šæ˜¯å¦æœ‰ Docker
- âœ… éœ€è¦é¢‘ç¹è°ƒè¯•
- âœ… èµ„æºæœ‰é™çš„ç¯å¢ƒ

### é€‰æ‹© Docker éƒ¨ç½²ï¼ˆæ–¹æ¡ˆ 2ï¼‰çš„æƒ…å†µ

- âœ… ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
- âœ… éœ€è¦ç¯å¢ƒéš”ç¦»
- âœ… éœ€è¦ç‰ˆæœ¬ç®¡ç†
- âœ… å¤šæœåŠ¡éƒ¨ç½²
- âœ… å·²æœ‰ Docker åŸºç¡€è®¾æ–½

---

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | æœ¬åœ°è¿è¡Œ | Docker |
|------|---------|--------|
| å¯åŠ¨æ—¶é—´ | ~10ç§’ | ~20-30ç§’ |
| å†…å­˜å ç”¨ | ~100MB | ~150-200MB |
| ç£ç›˜å ç”¨ | ~200MB | ~500MB |
| çµæ´»æ€§ | é«˜ | ä¸­ |
| å¯ç§»æ¤æ€§ | ä½ | é«˜ |
| è°ƒè¯•æ–¹ä¾¿åº¦ | é«˜ | ä¸­ |

---

## ğŸ¯ æ¨èæµç¨‹

### CloudStudio ç¯å¢ƒï¼ˆå½“å‰ï¼‰

```bash
# æ¨èï¼šä½¿ç”¨æœ¬åœ°ç›´æ¥è¿è¡Œï¼ˆæ–¹æ¡ˆ 1ï¼‰
cd /workspace/AIClient-2-API
bash ä¸€é”®éƒ¨ç½².sh
```

### æœ‰ Docker çš„ç¯å¢ƒ

```bash
# å¯ä»¥é€‰æ‹©ä»»æ„ä¸€ç§æ–¹æ¡ˆ

# æ–¹æ¡ˆ 1: æœ¬åœ°è¿è¡Œï¼ˆæ›´å¿«ï¼‰
bash ä¸€é”®éƒ¨ç½².sh

# æ–¹æ¡ˆ 2: Docker è¿è¡Œï¼ˆæ›´éš”ç¦»ï¼‰
cd /workspace/AIClient-2-API/docker
docker compose up -d
```

### æ—  Docker çš„ç¯å¢ƒ

```bash
# åªèƒ½ä½¿ç”¨æ–¹æ¡ˆ 1
cd /workspace/AIClient-2-API
bash ä¸€é”®éƒ¨ç½².sh
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### æœ¬åœ°ç›´æ¥è¿è¡Œ

- éœ€è¦ç¡®ä¿ Node.js ç‰ˆæœ¬ â‰¥ 20.0.0
- éœ€è¦ç¡®ä¿ 3000 ç«¯å£æœªè¢«å ç”¨
- ä¾èµ–ç³»ç»Ÿç¯å¢ƒï¼ˆNode.jsã€npmï¼‰

### Docker éƒ¨ç½²

- éœ€è¦å®‰è£… Docker
- éœ€è¦æœ‰ Docker è¿è¡Œæƒé™
- éœ€è¦ç¡®ä¿æ˜ å°„çš„ç«¯å£æœªè¢«å ç”¨
- é…ç½®æ–‡ä»¶éœ€è¦æŒ‚è½½åˆ°å®¹å™¨

---

## ğŸ”„ æ–¹æ¡ˆåˆ‡æ¢

### ä»æœ¬åœ°è¿è¡Œåˆ‡æ¢åˆ° Docker

```bash
# 1. åœæ­¢æœ¬åœ°æœåŠ¡
lsof -ti:3000 | xargs kill -9

# 2. å¯åŠ¨ Docker
cd /workspace/AIClient-2-API/docker
docker compose up -d
```

### ä» Docker åˆ‡æ¢åˆ°æœ¬åœ°è¿è¡Œ

```bash
# 1. åœæ­¢ Docker
docker compose down

# 2. å¯åŠ¨æœ¬åœ°æœåŠ¡
cd /workspace/AIClient-2-API
bash ä¸€é”®éƒ¨ç½².sh
```

---

## ğŸ†˜ æ•…éšœæ’é™¤

### æ–¹æ¡ˆ 1 æ•…éšœæ’é™¤

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
bash health-check.sh

# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
tail -100 /tmp/aiclient.log

# é‡å¯æœåŠ¡
bash ä¸€é”®éƒ¨ç½².sh
```

### æ–¹æ¡ˆ 2 æ•…éšœæ’é™¤

```bash
# æ£€æŸ¥ Docker çŠ¶æ€
docker ps -a

# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs -f aiclient2api

# æ£€æŸ¥å®¹å™¨çŠ¶æ€
docker inspect aiclient2api
```

---

## ğŸ“ æ€»ç»“

- **å½“å‰ç¯å¢ƒ**: æ”¯æŒ Dockerï¼Œä½†æ¨èä½¿ç”¨æœ¬åœ°ç›´æ¥è¿è¡Œï¼ˆæ–¹æ¡ˆ 1ï¼‰
- **æ–¹æ¡ˆ 1**: æ— éœ€ Dockerï¼Œå¯åŠ¨å¿«ï¼Œé€‚åˆ CloudStudio
- **æ–¹æ¡ˆ 2**: éœ€è¦ Dockerï¼Œæ›´éš”ç¦»ï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒ
- **æ¨è**: ä½¿ç”¨ `bash ä¸€é”®éƒ¨ç½².sh` è¿›è¡Œéƒ¨ç½²

æ— è®ºä½ çš„ç¯å¢ƒæ˜¯å¦æ”¯æŒ Dockerï¼Œéƒ½å¯ä»¥ä½¿ç”¨è¿™ä¸ªé¡¹ç›®ï¼
